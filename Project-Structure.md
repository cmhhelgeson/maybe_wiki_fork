## Project Structure

Below, you'll find a broad description of the function of various files and folders within the maybe-finance proejct. While much of the structure below is germaine to almost every Ruby on Rails project, this guide will take note of various files that are essential to the layout of the maybe-finance project.

### Database (db)

Files related to database creation and managaement with the ActiveRecord ORM (aka Rail's default Object Relational Mapping tool). More about the purpose, design, and intended usage of ActiveRecord can be found at this link: https://guides.rubyonrails.org/active_record_basics.html

- **/migrate**: A folder containing a collection of Rails ActiveRecord Migrations. Each active record migration abstracts away SQL-specific alterations to your program's database schema, allowing you to utilize Ruby to alter the structure of your database. While this description might make it sound as if migrations are only adding to the structure defined in our schema.rb file, our migrations code is actually the core of how we define our program's database. In fact, if you compare in schema.rb with the collected code from migration, you'll see that the table and class definitions are 1:1.

Each Rails migration file has a distinct structure:
```rb
# This line specifies that the migration CreateAccountLoans inherits from ActiveRecord::Migration[7.2]
# Specifying the version of our migration code allows future versions of ActiveRecord to properly
# execute/interpret older migrations, even if future versions of Rails contain new features.
class CreateAccountLoans < ActiveRecord::Migration[7.2]
  # Defines a change to the schema
  def change
    # Creates a table called 'account_loans'with a primary uuid key
    create_table :account_loans, id: :uuid do |t|
      # Automatically creates a 'created_at' and 'updated_at' datetime column to the table
      t.timestamps
    end
  end
end
```

To learn more about Rails migrations, including how to define a migration reversion, follow this guide: https://guides.rubyonrails.org/active_record_migrations.html

- **schema.rb**: A representation of the current state of our program's database schema, automatically generated by Rails when running our schema migratons.
- **seedsr.rb**: Populates the database with the initial data required to run the Maybe application. This file defines this initial data using models from the app/models directory.


### App/Views

The app/views folder contains most of the html for our project, all found within Embedded Ruby files. 

### App/Models

Folder that defines the application's models. According to Rails conventions, model naming schemes will directly correlate to database tables with the same name (albeit pluralized). For instance, model Family will correlate to database table 'familes', and model Account::Vehicle will correlate to database table 'account_vehicles'. By coupling models and database tables in this way, Rails allows us to write generalizable ruby code that operates on our databases. 

***/app/models/conerns***: 

A folder where each file contains a module that extends ActiveSupport::Concern, otherwise known as a concern. A concern is the same as any other module that can be inherited by classes, just with a specific structure that delineates how instance methods and class methods are created on the inheriting class. To put it simply, any methods defined in the 'included do' block become instance methods of the inheriting class. An example call on such a method would look like this:

```rb
class_instance.new_method arg1, arg2
``` 
Any methods defined in the 'class_methods' do block become class methods of the inheriting class. An example call on this kind of method would look like this:

```rb
Class.new_method arg1, arg2
``` 

To learn more about concerns, read the article at this link: https://www.writesoftwarewell.com/how-rails-concerns-work-and-how-to-use-them/

**Notable Concenrs**

Accountable: 



Given the centrality of the account model to the function of our program, let's take a look at the account model definition to get a better idea for how models are defined and how model definitions correspond to database table definitions (i.e migrations).

```rb
class Account < ApplicationRecord
  # Creates a uni-directional association between from an Account Model to a single Family Model
  belongs_to :family

  # Use Delegat
  delegated_type :accountable, types: Accountable::TYPES, dependent: :destroy

  delegate :type_name, to: :accountable

  # Before an Account entry is created on the accounts table, run check currency
  before_create :check_currency

  def check_currency
    if self.original_currency == self.family.currency
      self.converted_balance = self.original_balance
      self.converted_currency = self.original_currency
    else
      self.converted_balance = ExchangeRate.convert(self.original_currency, self.family.currency, self.original_balance)
      self.converted_currency = self.family.currency
    end
  end
end
```

- **/app/models/**:
    - Account
    - Application Record
    - Credit
    - Currency
    - Current
    - Exchange Rate
    - Family
    - Invite Code
    - User


- **/app/models/account**: A folder containing a collection of Rails ActiveRecord Migrations. Each active record migration abstracts away SQL-specific alterations to your program's database schema, allowing you to utilize Ruby to alter the structure of your database. While this description might make it sound as if migrations are only adding to the structure defined in our schema.rb file, our migrations code is actually the core of how we define our program's database. In fact, if you compare in schema.rb with the collected code from migration, you'll see that the table and class definitions are 1:1.


Each Rails migration file has a distinct structure:
```rb
# This line specifies that the migration CreateAccountLoans inherits from ActiveRecord::Migration[7.2]
# Specifying the version of our migration code allows future versions of ActiveRecord to properly
# execute/interpret older migrations, even if future versions of Rails contain new features.
class CreateAccountLoans < ActiveRecord::Migration[7.2]
  # Defines a change to the schema
  def change
    # Creates a table called 'account_loans'with a primary uuid key
    create_table :account_loans, id: :uuid do |t|
      # Automatically creates a 'created_at' and 'updated_at' datetime column to the table
      t.timestamps
    end
  end
end
```

To learn more about Rails migrations, including how to define a migration reversion, follow this guide: https://guides.rubyonrails.org/active_record_migrations.html

- **schema.rb**: A representation of the current state of our program's database schema, automatically generated by Rails when running our schema migratons.
- **seedsr.rb**: Populates the database with the initial data required to run the Maybe application. This file defines this initial data using models from the app/models directory.



